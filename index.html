<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kategorisierungsübung</title>
    <style>
        /* Stil für den Text und die Container */
        .container {
            font-size: 18px;
            margin-top: 20px;
            color: #555;
        }
        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .button {
            padding: 10px 20px;
            font-size: 16px;
            color: white;
            background-color: #d93a8b;
            border: none;
            border-radius: 10px;
            cursor: not-allowed;
            opacity: 0.5;
            transition: opacity 0.3s, cursor 0.3s;
        }
        .button:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }
        .button:not(:disabled) {
            cursor: pointer;
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Kategorisierungsübung</h1>
        <p>Ordne die folgenden Aussagen den richtigen Kategorien zu. Ziehe sie in die entsprechenden Felder.</p>
        <div class="categories">
            <div class="category" id="category1" ondrop="drop(event)" ondragover="allowDrop(event)">
                <h3>24 Monate Laufzeit</h3>
            </div>
            <div class="category" id="category2" ondrop="drop(event)" ondragover="allowDrop(event)">
                <h3>12 Monate Laufzeit</h3>
            </div>
            <div class="category" id="category3" ondrop="drop(event)" ondragover="allowDrop(event)">
                <h3>1 Monat Laufzeit</h3>
            </div>
        </div>
        <div id="statements"></div>
        <div id="score">Punktzahl: <span id="points">0</span> / 9</div>
        <div class="button-container">
            <button id="backButton" class="button" disabled>Zurück</button>
            <button id="nextButton" class="button" disabled>Weiter</button>
        </div>
    </div>

    <script>
        const statements = [
            { text: "MagentaZuhause XL mit MagentaTV Smart", correctCategory: "category1" },
            { text: "MEGA SPORT", correctCategory: "category2" },
            { text: "CountryFlat 1.5", correctCategory: "category3" },
            { text: "WLAN Comfort", correctCategory: "category2" },
            { text: "GIGA 1000", correctCategory: "category1" },
            { text: "TV-Paket Family", correctCategory: "category3" },
            { text: "MagentaMobil Basic", correctCategory: "category1" },
            { text: "MagentaSport", correctCategory: "category3" },
            { text: "Speedport Smart", correctCategory: "category2" },
        ];

        let score = 0;

        function createStatements() {
            const statementsContainer = document.getElementById("statements");
            statements.forEach((statement, index) => {
                const div = document.createElement("div");
                div.className = "statement";
                div.draggable = true;
                div.id = `statement${index}`;
                div.ondragstart = drag;
                
                const span = document.createElement("span");
                span.textContent = statement.text;
                div.appendChild(span);
                
                statementsContainer.appendChild(div);
            });
        }

        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
        }

        function drop(ev) {
            ev.preventDefault();
            const data = ev.dataTransfer.getData("text");
            const draggedElement = document.getElementById(data);
            
            let targetElement = ev.target;

            // Prüfen, ob auf eine andere Aussage gedroppt wird
            while (!targetElement.classList.contains("category")) {
                targetElement = targetElement.parentNode;
            }

            targetElement.appendChild(draggedElement);
            checkAnswer(parseInt(data.replace("statement", "")), targetElement.id);
        }

        function checkAnswer(statementIndex, categoryId) {
            const statement = statements[statementIndex];
            const statementElement = document.getElementById(`statement${statementIndex}`);

            if (statement.correctCategory === categoryId) {
                statementElement.classList.add("correct");
                statementElement.classList.remove("incorrect");
                if (!statementElement.classList.contains("counted")) {
                    score++;
                    statementElement.classList.add("counted");
                    updateScore();
                }
            } else {
                statementElement.classList.add("incorrect");
                statementElement.classList.remove("correct");
                if (statementElement.classList.contains("counted")) {
                    score--;
                    statementElement.classList.remove("counted");
                    updateScore();
                }
            }
        }

        function updateScore() {
            document.getElementById("points").textContent = score;
            
            // Überprüfen, ob alle Punkte erreicht wurden
            if (score === 9) {
                alert("Gratulation! Du hast alle Aussagen richtig zugeordnet!");
                document.getElementById("nextButton").disabled = false;
            } else {
                document.getElementById("nextButton").disabled = true;
            }
        }

        // Event-Listener für den "Weiter"-Button
        document.getElementById("nextButton").addEventListener("click", function() {
            if (!this.disabled) {
                window.location.href = "https://hikimetti.github.io/TK/tyfys.html";
            }
        });

        createStatements();
    </script>

</body>
</html>
